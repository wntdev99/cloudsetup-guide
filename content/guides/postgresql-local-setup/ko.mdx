# PostgreSQL 로컬 설치 및 데이터베이스 생성

PostgreSQL은 **강력하고 신뢰할 수 있는 오픈 소스 관계형 데이터베이스**입니다. 로컬 개발 머신에 설치하여 완전히 무료로 사용할 수 있습니다. 20분 안에 첫 번째 데이터베이스를 생성하고 실행할 수 있습니다.

<FreeTierInfo
  service="PostgreSQL"
  limit="무제한 사용 가능"
  period="완전 무료"
  status="free"
/>

## 시작하기 전에

<PrerequisiteCheck items={[
  { text: "Windows, Mac 또는 Linux 컴퓨터", required: true },
  { text: "관리자 권한 (설치용)", required: true },
  { text: "인터넷 연결", required: true }
]} />

<Callout type="info">
📊 **PostgreSQL이란?** PostgreSQL은 복잡한 쿼리, 트랜잭션, 그리고 확장 가능한 데이터 타입을 지원하는 강력한 데이터베이스입니다. 개발자, 스타트업, 그리고 대기업에서 널리 사용되고 있습니다.
</Callout>

---

<Step number={1} title="PostgreSQL 다운로드 및 설치 (Windows)">

**Windows 사용자의 경우:**

1. [PostgreSQL 공식 웹사이트](https://www.postgresql.org/download/windows/)를 방문합니다.
2. **최신 안정 버전** (현재 15.x 또는 16.x)을 클릭합니다.
3. **Windows 인스톨러**를 다운로드합니다.
4. 다운로드된 파일 (예: postgresql-16-x64-setup.exe)을 실행합니다.
5. 설치 마법사가 시작됩니다:
   - 설치 디렉토리 선택 (기본값 C:/Program Files/PostgreSQL)
   - **슈퍼유저 암호** 설정 (기억하기!)
   - 포트는 기본 5432 유지
   - 로케일 선택 (기본값 [C])

6. **설치 완료**를 클릭하여 마칩니다.

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/postgresql/step1-windows-install-ko.png"
  alt="Windows PostgreSQL 설치 마법사"
  caption="PostgreSQL 설치 마법사 - 슈퍼유저 암호를 기억하세요"
  priority={true}
/>

<Callout type="warning">
⚠️ **중요**: 슈퍼유저 (postgres) 암호를 안전한 곳에 기록해두세요. 데이터베이스 관리에 필요합니다.
</Callout>

</Step>

---

<Step number={2} title="Mac에 PostgreSQL 설치">

**Mac 사용자의 경우:**

Mac에서는 세 가지 방법으로 설치할 수 있습니다:

**방법 1: Homebrew 사용 (권장)**

1. [Homebrew](https://brew.sh)가 설치되어 있는지 확인합니다.
2. 터미널을 열고 다음을 실행합니다:

<CopyBlock
  code="brew install postgresql@16"
  language="bash"
/>

3. 설치가 완료된 후:

<CopyBlock
  code="brew services start postgresql@16"
  language="bash"
/>

4. PostgreSQL이 시작됩니다.

**방법 2: PostgreSQL.app 사용**

1. [PostgreSQL.app](https://postgresapp.com/)를 방문합니다.
2. 최신 버전을 다운로드하고 Applications 폴더로 드래그합니다.
3. Finder에서 PostgreSQL.app을 더블클릭합니다.
4. 메뉴 바에 코끼리 아이콘이 나타나면 시작된 것입니다.

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/postgresql/step2-mac-install-ko.png"
  alt="Mac PostgreSQL.app 설치"
  caption="PostgreSQL.app - Mac에 가장 간단한 설치 방법"
/>

<Callout type="tip">
💡 **팁**: PostgreSQL.app을 사용하면 설정이 더 간단합니다.
</Callout>

</Step>

---

<Step number={3} title="Linux에 PostgreSQL 설치">

**Linux 사용자의 경우 (Ubuntu/Debian):**

1. 터미널을 열고 다음을 실행합니다:

<CopyBlock
  code="sudo apt update && sudo apt install -y postgresql postgresql-contrib"
  language="bash"
/>

2. PostgreSQL이 자동으로 시작됩니다. 상태를 확인합니다:

<CopyBlock
  code="sudo systemctl status postgresql"
  language="bash"
/>

3. postgres 사용자로 전환합니다:

<CopyBlock
  code="sudo -i -u postgres"
  language="bash"
/>

4. PostgreSQL 클라이언트에 접속합니다:

<CopyBlock
  code="psql"
  language="bash"
/>

5. 성공하면 프롬프트가 postgres=# 로 변경됩니다.

**Fedora/RHEL의 경우:**

<CopyBlock
  code="sudo dnf install -y postgresql-server postgresql-contrib"
  language="bash"
/>

<CopyBlock
  code="sudo postgresql-setup initdb"
  language="bash"
/>

<CopyBlock
  code="sudo systemctl start postgresql"
  language="bash"
/>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/postgresql/step3-linux-install-ko.png"
  alt="Linux PostgreSQL 설치"
  caption="Ubuntu/Debian에 PostgreSQL 설치"
/>

<Callout type="info">
ℹ️ **참고**: Linux에서는 postgres 사용자가 자동으로 생성됩니다.
</Callout>

</Step>

---

<Step number={4} title="첫 번째 데이터베이스 생성 및 연결">

이제 첫 번째 데이터베이스를 생성합니다.

**Windows / Mac에서 psql 실행:**

1. 명령 프롬프트 또는 터미널을 열고:

<CopyBlock
  code="psql -U postgres"
  language="bash"
/>

2. 슈퍼유저 암호를 입력합니다 (Windows에서는 설치할 때 입력한 암호).

3. 프롬프트가 postgres=# 로 변경됩니다.

**데이터베이스 생성:**

<CopyBlock
  code="CREATE DATABASE myapp;"
  language="sql"
/>

<CopyBlock
  code="CREATE USER appuser WITH PASSWORD 'secure_password_here';"
  language="sql"
/>

<CopyBlock
  code="ALTER ROLE appuser SET client_encoding TO 'utf8';"
  language="sql"
/>

<CopyBlock
  code="ALTER ROLE appuser SET timezone TO 'UTC';"
  language="sql"
/>

<CopyBlock
  code="GRANT ALL PRIVILEGES ON DATABASE myapp TO appuser;"
  language="sql"
/>

**데이터베이스 확인:**

<CopyBlock
  code="\\l"
  language="sql"
/>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/postgresql/step4-create-database-ko.png"
  alt="PostgreSQL 데이터베이스 생성"
  caption="psql에서 새 데이터베이스와 사용자 생성"
/>

**psql 종료:**

<CopyBlock
  code="\\q"
  language="sql"
/>

<Checkpoint
  title="설정 확인"
  items={[
    "PostgreSQL이 설치되었나요?",
    "데이터베이스 'myapp'이 생성되었나요?",
    "사용자 'appuser'가 생성되었나요?",
    "psql에 성공적으로 연결했나요?"
  ]}
/>

<Callout type="success">
✅ **완료!** PostgreSQL이 로컬 머신에 설치되고 데이터베이스가 생성되었습니다. 이제 애플리케이션에서 이 데이터베이스를 사용할 수 있습니다.
</Callout>

</Step>

---

## 다음 단계

PostgreSQL 로컬 설치를 완료했으니:

1. **[PostgreSQL 클라우드 설정](../postgresql-cloud-setup)** - 프로덕션을 위해 클라우드 데이터베이스로 마이그레이션
2. **[pgAdmin으로 관리](https://www.pgadmin.org/)** - GUI를 통한 데이터베이스 관리
3. **[백업 및 복원](https://www.postgresql.org/docs/current/backup.html)** - 데이터 보호 방법 학습

---

## 개발자 팁

<DevTip>
**연결 문자열 예제:**

로컬 개발의 경우, 연결 문자열은:

```
postgresql://appuser:secure_password_here@localhost:5432/myapp
```

또는:

```
postgres://appuser:secure_password_here@127.0.0.1:5432/myapp
```

환경 변수에 저장하세요 (.env 파일):

```
DATABASE_URL=postgresql://appuser:password@localhost:5432/myapp
```
</DevTip>

---

## 자주 묻는 질문

<Callout type="info">
**Q. Windows에서 psql 명령을 찾을 수 없다는 오류가 나옵니다**

A. PostgreSQL 설치 디렉토리의 bin 폴더를 PATH에 추가해야 합니다. 시스템 환경 변수에서 'C:\Program Files\PostgreSQL\16\bin'을 추가하세요.
</Callout>

<Callout type="info">
**Q. 슈퍼유저 암호를 잊어버렸습니다**

A. Windows에서는 PostgreSQL을 다시 설치하거나 pg_hba.conf 파일을 수정하여 암호를 재설정할 수 있습니다. Mac/Linux에서는 sudo 권한으로 postgres 사용자로 전환하면 암호 없이 접속할 수 있습니다.
</Callout>

<Callout type="info">
**Q. 포트 5432가 이미 사용 중입니다**

A. 다른 PostgreSQL 인스턴스가 실행 중일 수 있습니다. 포트 충돌을 해결하려면 설치 중 다른 포트 (예: 5433)를 선택하거나 기존 인스턴스를 중지하세요.
</Callout>

<Callout type="info">
**Q. 로컬 데이터베이스를 프로덕션으로 옮기려면?**

A. pg_dump를 사용하여 로컬 데이터베이스를 내보낸 후, 클라우드 데이터베이스에 복원합니다. [postgresql-cloud-setup](../postgresql-cloud-setup) 가이드를 참조하세요.
</Callout>

---

## 문제 해결

### PostgreSQL 서비스가 시작되지 않습니다

**Windows:**
- Windows 서비스를 확인합니다: services.msc
- "postgresql-x64-16" 서비스를 찾아 시작합니다
- 관리자 권한으로 명령 프롬프트를 열고 재설치를 시도합니다

**Mac:**
- 터미널에서 `brew services restart postgresql@16` 실행
- 또는 PostgreSQL.app을 다시 시작합니다

**Linux:**
- `sudo systemctl restart postgresql` 실행
- 로그를 확인합니다: `sudo journalctl -xe`

### psql에서 "role postgres does not exist" 오류

- Mac/Linux에서는 `sudo -i -u postgres` 후 `psql` 실행
- Windows에서는 `-U postgres` 옵션과 함께 실행하거나 권한을 확인합니다

### 데이터베이스 쿼리가 작동하지 않습니다

- 먼저 `\dt` 명령으로 테이블을 확인합니다
- 올바른 데이터베이스에 연결했는지 확인합니다: `\c myapp`
- SQL 문법을 다시 확인하고 세미콜론을 붙입니다

---

**축하합니다!** PostgreSQL이 로컬에서 완전히 설정되었습니다. 이제 애플리케이션 개발을 시작할 준비가 완료되었습니다. 🚀
