# GitLab CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì •í•˜ê¸°

ì´ì œ **GitLabì—ì„œ ìë™í™”ëœ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ íŒŒì´í”„ë¼ì¸**ì„ ì„¤ì •í•©ë‹ˆë‹¤. `.gitlab-ci.yml` íŒŒì¼ì„ í†µí•´ ì½”ë“œ ì»¤ë°‹ ì‹œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<FreeTierInfo
  service="GitLab CI/CD"
  limit="ì›” 400ë¶„ ë¬´ë£Œ íŒŒì´í”„ë¼ì¸ ì‹œê°„"
  period="monthly"
  status="generous"
/>

## ì‹œì‘í•˜ê¸° ì „ì—

<PrerequisiteCheck items={[
  { text: "GitLab í”„ë¡œì íŠ¸", required: true },
  { text: "ì €ì¥ì†Œ ë³µì œ ì™„ë£Œ", required: true },
  { text: "Node.js ë˜ëŠ” Python í”„ë¡œì íŠ¸", required: false }
]} />

<Callout type="info">
ğŸš€ **CI/CDë€?** CIëŠ” Continuous Integration (ì—°ì† í†µí•©)ìœ¼ë¡œ ì½”ë“œ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. CDëŠ” Continuous Deployment (ì—°ì† ë°°í¬)ë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼ í›„ ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.
</Callout>

---

<Step number={1} title=".gitlab-ci.yml íŒŒì¼ ìƒì„±">

### íŒŒì¼ ìƒì„±

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.gitlab-ci.yml` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤:

<CopyBlock language="bash" title="íŒŒì¼ ìƒì„±">
touch .gitlab-ci.yml
</CopyBlock>

### ê¸°ë³¸ Python íŒŒì´í”„ë¼ì¸

Python í”„ë¡œì íŠ¸ì˜ ê²½ìš°:

<CopyBlock language="yaml" title=".gitlab-ci.yml (Python)">
stages:
  - test
  - build

variables:
  PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"

test:
  stage: test
  image: python:3.11
  script:
    - pip install -r requirements.txt
    - pytest tests/
  cache:
    paths:
      - .cache/pip
      - venv/

build:
  stage: build
  image: python:3.11
  script:
    - pip install -r requirements.txt
    - python setup.py build
  artifacts:
    paths:
      - build/
</CopyBlock>

### ê¸°ë³¸ Node.js íŒŒì´í”„ë¼ì¸

Node.js í”„ë¡œì íŠ¸ì˜ ê²½ìš°:

<CopyBlock language="yaml" title=".gitlab-ci.yml (Node.js)">
stages:
  - install
  - test
  - build

variables:
  npm_config_cache: "$CI_PROJECT_DIR/.npm"

install:
  stage: install
  image: node:18
  script:
    - npm install
  cache:
    paths:
      - node_modules/
      - .npm/

test:
  stage: test
  image: node:18
  script:
    - npm install
    - npm run test
  cache:
    paths:
      - node_modules/

build:
  stage: build
  image: node:18
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/
</CopyBlock>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/gitlab/step1-gitlab-ci-file-ko.png"
  alt=".gitlab-ci.yml íŒŒì¼"
  caption="í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— .gitlab-ci.yml íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤"
  priority={true}
/>

<Callout type="tip">
ğŸ’¡ **ìºì‹±**: `cache` í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ìºì‹œí•˜ë©´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

</Step>

---

<Step number={2} title="íŒŒì´í”„ë¼ì¸ ì»¤ë°‹ ë° ì‹¤í–‰">

### íŒŒì¼ ì¶”ê°€ ë° ì»¤ë°‹

<CopyBlock language="bash" title="ë³€ê²½ì‚¬í•­ ì»¤ë°‹">
git add .gitlab-ci.yml
git commit -m "ci: add GitLab CI/CD pipeline"
git push origin main
</CopyBlock>

### íŒŒì´í”„ë¼ì¸ ëª¨ë‹ˆí„°ë§

1. GitLab í”„ë¡œì íŠ¸ í˜ì´ì§€ë¡œ ì´ë™
2. **CI/CD** > **íŒŒì´í”„ë¼ì¸[Pipelines]** ì„ íƒ
3. ìµœì‹  íŒŒì´í”„ë¼ì¸ í´ë¦­
4. ê° ìŠ¤í…Œì´ì§€ì˜ ì§„í–‰ ìƒí™© í™•ì¸

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/gitlab/step2-pipeline-execution-ko.png"
  alt="íŒŒì´í”„ë¼ì¸ ì‹¤í–‰"
  caption="ì½”ë“œë¥¼ í‘¸ì‹œí•˜ë©´ íŒŒì´í”„ë¼ì¸ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤"
/>

<Checkpoint>
íŒŒì´í”„ë¼ì¸ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆë‚˜ìš”?
</Checkpoint>

</Step>

---

<Step number={3} title="í™˜ê²½ ë³€ìˆ˜ ë° ì‹œí¬ë¦¿ ì„¤ì •">

### í™˜ê²½ ë³€ìˆ˜ ì •ì˜

`.gitlab-ci.yml`ì—ì„œ ë³€ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:

<CopyBlock language="yaml" title="í™˜ê²½ ë³€ìˆ˜">
variables:
  NODE_ENV: production
  DATABASE_URL: "postgres://user:pass@localhost/db"
  API_KEY: "secret_key_value"

stages:
  - deploy

deploy:
  stage: deploy
  image: node:18
  script:
    - echo "Deploying with NODE_ENV=$NODE_ENV"
    - npm run deploy
</CopyBlock>

### ë³´ì•ˆ ë³€ìˆ˜ ì„¤ì • (ì‹œí¬ë¦¿)

ë¯¼ê°í•œ ì •ë³´ëŠ” GitLab ì‹œí¬ë¦¿ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤:

1. **í”„ë¡œì íŠ¸ ì„¤ì •[Settings]** > **CI/CD**
2. **ë³€ìˆ˜[Variables]** ì„¹ì…˜ì—ì„œ **ë³€ìˆ˜ ì¶”ê°€**
3. **í‚¤**: `DATABASE_PASSWORD`
4. **ê°’**: ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸
5. **ë³´í˜¸ë¨[Protected]** ì²´í¬ (ë©”ì¸ ë¸Œëœì¹˜ì—ë§Œ ì‚¬ìš©)
6. **ì €ì¥**

ê·¸ ë‹¤ìŒ íŒŒì´í”„ë¼ì¸ì—ì„œ ì‚¬ìš©:

<CopyBlock language="yaml" title="ì‹œí¬ë¦¿ ë³€ìˆ˜ ì‚¬ìš©">
deploy:
  stage: deploy
  script:
    - echo "DB Password: $DATABASE_PASSWORD"
  only:
    - main
</CopyBlock>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/gitlab/step3-variables-ko.png"
  alt="í™˜ê²½ ë³€ìˆ˜ ì„¤ì •"
  caption="í™˜ê²½ ë³€ìˆ˜ì™€ ì‹œí¬ë¦¿ì„ ì„¤ì •í•˜ì—¬ ë¯¼ê° ì •ë³´ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤"
/>

<Callout type="warning">
âš ï¸ **ì£¼ì˜**: ë¹„ë°€ë²ˆí˜¸ë‚˜ API í‚¤ëŠ” ì ˆëŒ€ë¡œ ì½”ë“œì— ì§ì ‘ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. ì‹œí¬ë¦¿ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.
</Callout>

</Step>

---

<Step number={4} title="ë°°í¬ ìŠ¤í…Œì´ì§€ ì¶”ê°€">

### ê°œë°œ í™˜ê²½ìœ¼ë¡œ ë°°í¬

<CopyBlock language="yaml" title="ë°°í¬ ì„¤ì •">
stages:
  - test
  - build
  - deploy_dev
  - deploy_prod

deploy_dev:
  stage: deploy_dev
  image: node:18
  environment:
    name: development
    url: https://dev.example.com
  script:
    - npm install
    - npm run build
    - npm run deploy:dev
  only:
    - develop

deploy_prod:
  stage: deploy_prod
  image: node:18
  environment:
    name: production
    url: https://example.com
  script:
    - npm install
    - npm run build
    - npm run deploy:prod
  only:
    - main
  when: manual
</CopyBlock>

ì˜µì…˜ ì„¤ëª…:
- `environment.name`: ë°°í¬ í™˜ê²½ ì´ë¦„
- `environment.url`: ë°°í¬ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ URL
- `only`: íŠ¹ì • ë¸Œëœì¹˜ì—ì„œë§Œ ì‹¤í–‰ (develop, main)
- `when: manual`: ìˆ˜ë™ í™•ì¸ í›„ ë°°í¬

### Dockerë¥¼ ì‚¬ìš©í•œ ë°°í¬

<CopyBlock language="yaml" title="Docker ë°°í¬">
build_image:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t myapp:latest .
    - docker tag myapp:latest registry.gitlab.com/user/myapp:latest
    - docker push registry.gitlab.com/user/myapp:latest
</CopyBlock>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/gitlab/step4-deployment-ko.png"
  alt="ë°°í¬ ìŠ¤í…Œì´ì§€"
  caption="ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œì˜ ë°°í¬ë¥¼ ìë™í™”í•©ë‹ˆë‹¤"
/>

<DevTip>
ì—¬ëŸ¬ í™˜ê²½ìœ¼ë¡œì˜ ë°°í¬ë¥¼ ìë™í™”í•˜ë©´ ìˆ˜ë™ ë°°í¬ ì˜¤ë¥˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œë•ì…˜ ë°°í¬ëŠ” `when: manual`ë¡œ ì„¤ì •í•˜ì—¬ ê²€ì¦ í›„ ë°°í¬í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.
</DevTip>

</Step>

---

<Step number={5} title="íŒŒì´í”„ë¼ì¸ ìµœì í™” ë° ëª¨ë‹ˆí„°ë§">

### ë³‘ë ¬ ì‹¤í–‰

ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰í•©ë‹ˆë‹¤:

<CopyBlock language="yaml" title="ë³‘ë ¬ ì‹¤í–‰">
test_unit:
  stage: test
  script:
    - npm run test:unit

test_integration:
  stage: test
  script:
    - npm run test:integration

lint:
  stage: test
  script:
    - npm run lint
</CopyBlock>

ì´ ì„¸ ì‘ì—…ì€ ë™ì‹œì— ì‹¤í–‰ë˜ì–´ ì „ì²´ ì‹œê°„ì„ ë‹¨ì¶•í•©ë‹ˆë‹¤.

### ì¡°ê±´ë¶€ ì‹¤í–‰

íŠ¹ì • ì¡°ê±´ì—ì„œë§Œ ì‘ì—… ì‹¤í–‰:

<CopyBlock language="yaml" title="ì¡°ê±´ë¶€ ì‹¤í–‰">
deploy_prod:
  stage: deploy
  script:
    - npm run deploy
  only:
    - tags
  except:
    - schedules
</CopyBlock>

- `only`: íŠ¹ì • ì¡°ê±´ì—ì„œë§Œ ì‹¤í–‰
- `except`: íŠ¹ì • ì¡°ê±´ì—ì„œ ì œì™¸

### íŒŒì´í”„ë¼ì¸ ìŠ¤ì¼€ì¤„

ì •ê¸°ì ìœ¼ë¡œ ì‘ì—… ì‹¤í–‰:

1. **CI/CD** > **ìŠ¤ì¼€ì¤„[Schedules]**
2. **ìƒˆ ìŠ¤ì¼€ì¤„ ìƒì„±** í´ë¦­
3. ì„¤ëª…: "Night build"
4. ë³€ìˆ˜ ì„¤ì •
5. Cron í‘œí˜„ì‹: `0 2 * * *` (ë§¤ì¼ 2ì‹œ)

<Callout type="success">
âœ… **ì™„ë£Œ!** GitLab CI/CD íŒŒì´í”„ë¼ì¸ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì½”ë“œ ì»¤ë°‹ ì‹œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ê°€ ì§„í–‰ë©ë‹ˆë‹¤.
</Callout>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/gitlab/step5-optimization-ko.png"
  alt="íŒŒì´í”„ë¼ì¸ ìµœì í™”"
  caption="ë³‘ë ¬ ì‹¤í–‰, ì¡°ê±´ë¶€ ì‹¤í–‰, ìŠ¤ì¼€ì¤„ì„ í™œìš©í•˜ì—¬ íŒŒì´í”„ë¼ì¸ì„ ìµœì í™”í•©ë‹ˆë‹¤"
/>

</Step>

---

## ë¬¸ì œ í•´ê²°

### íŒŒì´í”„ë¼ì¸ ì‹¤íŒ¨

1. íŒŒì´í”„ë¼ì¸ í´ë¦­
2. ì‹¤íŒ¨í•œ ì‘ì—… í´ë¦­
3. **ë¡œê·¸** íƒ­ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸

### ìºì‹œê°€ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

1. `.gitlab-ci.yml`ì˜ `cache` ì„¤ì • í™•ì¸
2. `cache:key` ê°’ì´ ê³ ìœ í•œì§€ í™•ì¸
3. ìºì‹œ ìš©ëŸ‰ ì´ˆê³¼ ì—¬ë¶€ í™•ì¸

### ë°°í¬ê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤

1. í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
2. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²• í™•ì¸
3. ì„œë²„ ì ‘ê·¼ ê¶Œí•œ í™•ì¸ (SSH í‚¤, API í† í°)

### íŒŒì´í”„ë¼ì¸ ì‹œê°„ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤

1. ë³‘ë ¬ ì‹¤í–‰ìœ¼ë¡œ ë‹¨ì¶•
2. ìºì‹± í™œìš©
3. ë¶ˆí•„ìš”í•œ ì‘ì—… ì œê±°
4. ë¦¬ì†ŒìŠ¤ ì¦ì„¤ ê³ ë ¤
