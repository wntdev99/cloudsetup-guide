# Apache Kafka μ„¤μΉ λ° μ‹¤ν–‰ν•κΈ°

**Apache Kafka**λ” μ¤ν”μ†μ¤ μ΄λ²¤νΈ μ¤νΈλ¦¬λ° ν”λ«νΌμ…λ‹λ‹¤. λ€λ‰μ μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κ³  μ—¬λ¬ μ• ν”λ¦¬μΌ€μ΄μ… κ°„μ— λ©”μ‹μ§€λ¥Ό μ „λ‹¬ν•  μ μμµλ‹λ‹¤. μ΄ κ°€μ΄λ“λ¥Ό λ”°λΌ Dockerλ΅ Kafkaλ¥Ό μ„¤μΉν•κ³  μ‹¤ν–‰ν•μ„Έμ”.

<FreeTierInfo
  service="Apache Kafka"
  limit="μ¤ν”μ†μ¤, λ¬΄λ£ μμ²΄ νΈμ¤ν…"
  period="one-time"
  status="free"
/>

## μ‹μ‘ν•κΈ° μ „μ—

<PrerequisiteCheck items={[
  { text: "Docker μ„¤μΉ", required: true },
  { text: "Docker Compose", required: true },
  { text: "μµμ† 4GB RAM", required: true },
  { text: "ν„°λ―Έλ„", required: true }
]} />

<Callout type="info">
π“¨ **Kafkaλ€?** Kafkaλ” ν”„λ΅λ“€μ„κ°€ λ©”μ‹μ§€λ¥Ό λ°ν–‰ν•κ³  μ»¨μλ¨Έκ°€ κµ¬λ…ν•λ” λ©”μ‹μ§€ λΈλ΅μ»¤μ…λ‹λ‹¤. ν† ν”½μ„ ν†µν•΄ λ©”μ‹μ§€λ¥Ό κµ¬λ¶„ν•κ³  λ³µμμ μ»¨μλ¨Έκ°€ κ°™μ€ λ©”μ‹μ§€λ¥Ό λ°›μ„ μ μμµλ‹λ‹¤.
</Callout>

---

<Step number={1} title="Docker Composeλ΅ Kafka μ„¤μ •">

### docker-compose.yml νμΌ μƒμ„±

<CopyBlock language="bash" title="docker-compose.yml νμΌ μƒμ„±">
cat > docker-compose.yml << EOF
version: '3.8'
services:
  zookeeper:
    image: confluentinc/cp-zookeeper:7.4.0
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000
    ports:
      - "2181:2181"

  kafka:
    image: confluentinc/cp-kafka:7.4.0
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
      - "29092:29092"
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
EOF
</CopyBlock>

### μ„¤λ…

- **Zookeeper**: Kafka ν΄λ¬μ¤ν„° κ΄€λ¦¬
- **Kafka**: λ©”μ‹μ§€ λΈλ΅μ»¤
- ν¬νΈ 9092: μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈ μ—°κ²°
- ν¬νΈ 29092: λ‚΄λ¶€ μ»¨ν…μ΄λ„ ν†µμ‹ 

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/kafka/step1-compose-setup-ko.png"
  alt="Docker Compose μ„¤μ •"
  caption="docker-compose.yml νμΌμ„ μƒμ„±ν•©λ‹λ‹¤"
  priority={true}
/>

<Callout type="success">
β… **μ¤€λΉ„ μ™„λ£!** μ„¤μ • νμΌμ΄ μ¤€λΉ„λμ—μµλ‹λ‹¤.
</Callout>

<Checkpoint>
docker-compose.yml νμΌμ΄ μƒμ„±λμ—λ‚μ”?
</Checkpoint>

</Step>

---

<Step number={2} title="Kafka λΈλ΅μ»¤ μ‹μ‘">

### Docker Compose μ‹¤ν–‰

<CopyBlock language="bash" title="Kafka μ‹μ‘">
docker-compose up -d
</CopyBlock>

### μ‹¤ν–‰ ν™•μΈ

<CopyBlock language="bash" title="μ»¨ν…μ΄λ„ μƒνƒ ν™•μΈ">
docker-compose ps
</CopyBlock>

### λ΅κ·Έ ν™•μΈ

<CopyBlock language="bash" title="Kafka λ΅κ·Έ λ³΄κΈ°">
docker-compose logs -f kafka
</CopyBlock>

μ •μƒμ μΌλ΅ μ‹μ‘λλ©΄ "started" λ©”μ‹μ§€λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/kafka/step2-broker-start-ko.png"
  alt="λΈλ΅μ»¤ μ‹μ‘"
  caption="docker-compose up -dλ΅ Kafkaλ¥Ό μ‹μ‘ν•©λ‹λ‹¤"
/>

<Callout type="success">
β… **μ™„λ£!** Kafkaκ°€ μ‹¤ν–‰ μ¤‘μ…λ‹λ‹¤.
</Callout>

<Checkpoint>
Kafkaκ°€ μ •μƒμ μΌλ΅ μ‹μ‘λμ—λ‚μ”?
</Checkpoint>

</Step>

---

<Step number={3} title="ν† ν”½ μƒμ„±">

### Kafka ν† ν”½ μƒμ„±

Kafka μ»¨ν…μ΄λ„μ—μ„ ν† ν”½μ„ μƒμ„±ν•©λ‹λ‹¤.

<CopyBlock language="bash" title="ν† ν”½ μƒμ„±">
docker-compose exec kafka kafka-topics --create \
  --bootstrap-server localhost:9092 \
  --topic test-topic \
  --partitions 1 \
  --replication-factor 1
</CopyBlock>

### ν† ν”½ λ©λ΅ ν™•μΈ

<CopyBlock language="bash" title="ν† ν”½ λ©λ΅">
docker-compose exec kafka kafka-topics --list \
  --bootstrap-server localhost:9092
</CopyBlock>

### ν† ν”½ μƒμ„Έ μ •λ³΄

<CopyBlock language="bash" title="ν† ν”½ μ •λ³΄">
docker-compose exec kafka kafka-topics --describe \
  --bootstrap-server localhost:9092 \
  --topic test-topic
</CopyBlock>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/kafka/step3-topic-creation-ko.png"
  alt="ν† ν”½ μƒμ„±"
  caption="kafka-topics λ…λ ΉμΌλ΅ ν† ν”½μ„ μƒμ„±ν•©λ‹λ‹¤"
/>

<Callout type="tip">
π’΅ **ν**: `partitions`μ€ λ³‘λ ¬ μ²λ¦¬λ¥Ό μ„ν•΄ λ°μ΄ν„°λ¥Ό λ¶„μ‚°ν•©λ‹λ‹¤. `replication-factor`λ” λ°μ΄ν„° λ³µμ λ¥Ό μ„ν•΄ μ‚¬μ©ν•©λ‹λ‹¤.
</Callout>

<Checkpoint>
ν† ν”½μ΄ μ„±κ³µμ μΌλ΅ μƒμ„±λμ—λ‚μ”?
</Checkpoint>

</Step>

---

<Step number={4} title="Python ν΄λΌμ΄μ–ΈνΈ μ„¤μΉ">

### Kafka Python λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ

<CopyBlock language="bash" title="kafka-python μ„¤μΉ">
pip install kafka-python
</CopyBlock>

### Pythonμ—μ„ μ—°κ²° ν…μ¤νΈ

<CopyBlock language="python" title="Python μ—°κ²° ν…μ¤νΈ">
from kafka import KafkaProducer

try:
  producer = KafkaProducer(bootstrap_servers='localhost:9092')
  print('Connected to Kafka!')
  producer.close()
except Exception as e:
  print(f'Connection failed: {e}')
</CopyBlock>

### Node.js ν΄λΌμ΄μ–ΈνΈ μ„¤μΉ

<CopyBlock language="bash" title="kafkajs μ„¤μΉ">
npm install kafkajs
</CopyBlock>

### Node.jsμ—μ„ μ—°κ²° ν…μ¤νΈ

<CopyBlock language="javascript" title="Node.js μ—°κ²° ν…μ¤νΈ">
const { Kafka } = require('kafkajs');

const kafka = new Kafka({
  clientId: 'test-client',
  brokers: ['localhost:9092']
});

kafka.admin().connect()
  .then(() => {
    console.log('Connected to Kafka!');
    return kafka.admin().disconnect();
  })
  .catch(err => console.error('Connection failed:', err));
</CopyBlock>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/kafka/step4-client-install-ko.png"
  alt="ν΄λΌμ΄μ–ΈνΈ μ„¤μΉ"
  caption="Python λλ” Node.js ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„¤μΉν•©λ‹λ‹¤"
/>

<Callout type="success">
β… **μ™„λ£!** ν΄λΌμ΄μ–ΈνΈκ°€ μ„¤μΉλκ³  μ—°κ²°λμ—μµλ‹λ‹¤.
</Callout>

<Checkpoint>
ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ΄ μ„±κ³µν–λ‚μ”?
</Checkpoint>

</Step>

---

## λ‹¤μ λ‹¨κ³„

- [Kafka μ΄λ²¤νΈ μ¤νΈλ¦¬λ°](/guides/kafka-event-streaming) - λ©”μ‹μ§€ λ°ν–‰ λ° κµ¬λ…
- [Kafka κ³µμ‹ λ¬Έμ„](https://kafka.apache.org/documentation/)
- [Python ν΄λΌμ΄μ–ΈνΈ](https://kafka-python.readthedocs.io/)

## Kafka κΈ°λ³Έ κ°λ…

### ν”„λ΅λ“€μ„ (Producer)

λ©”μ‹μ§€λ¥Ό λ°ν–‰ν•©λ‹λ‹¤:

<CopyBlock language="python" title="ν”„λ΅λ“€μ„ μμ‹">
from kafka import KafkaProducer

producer = KafkaProducer(bootstrap_servers='localhost:9092')
producer.send('test-topic', b'Hello Kafka')
</CopyBlock>

### μ»¨μλ¨Έ (Consumer)

λ©”μ‹μ§€λ¥Ό κµ¬λ…ν•©λ‹λ‹¤:

<CopyBlock language="python" title="μ»¨μλ¨Έ μμ‹">
from kafka import KafkaConsumer

consumer = KafkaConsumer('test-topic', bootstrap_servers='localhost:9092')
for message in consumer:
  print(message.value)
</CopyBlock>

### ν† ν”½ (Topic)

λ©”μ‹μ§€λ¥Ό κµ¬λ¶„ν•λ” μ±„λ„μ…λ‹λ‹¤.

### νν‹°μ… (Partition)

ν† ν”½ λ‚΄μ λ°μ΄ν„° λ¶„ν• μ…λ‹λ‹¤.

## ν¬νΈ μ •λ³΄

- **2181**: Zookeeper
- **9092**: Kafka μ™Έλ¶€ λ¦¬μ¤λ„
- **29092**: Kafka λ‚΄λ¶€ λ¦¬μ¤λ„

## μ»¨ν…μ΄λ„ κ΄€λ¦¬

### μ¤‘μ§€

<CopyBlock language="bash" title="Kafka μ¤‘μ§€">
docker-compose stop
</CopyBlock>

### μ‹μ‘

<CopyBlock language="bash" title="Kafka μ‹μ‘">
docker-compose start
</CopyBlock>

### μ™„μ „ μ κ±°

<CopyBlock language="bash" title="μ κ±°">
docker-compose down -v
</CopyBlock>

---

## λ¬Έμ  ν•΄κ²°

### ν¬νΈ μ¶©λ

ν¬νΈ 9092κ°€ μ΄λ―Έ μ‚¬μ© μ¤‘μ΄λ©΄ docker-compose.ymlμ—μ„ ν¬νΈλ¥Ό λ³€κ²½ν•μ„Έμ”.

### λ©”λ¨λ¦¬ λ¶€μ΅±

Dockerμ λ©”λ¨λ¦¬ ν• λ‹Ήμ„ μ¦κ°€μ‹ν‚¤μ„Έμ”.

### μ—°κ²° μ‹¤ν¨

1. λ¨λ“  μ»¨ν…μ΄λ„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
2. ν¬νΈκ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ
3. λ΅κ·Έμ—μ„ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ
