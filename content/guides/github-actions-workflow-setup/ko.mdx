# GitHub Actions 워크플로우 설정 - CI/CD 자동화

GitHub Actions는 **GitHub에 내장된 CI/CD 플랫폼**으로, 코드 푸시 시 자동으로 테스트, 빌드, 배포를 수행합니다. 복잡한 외부 도구 없이 GitHub 리포지토리 내에서 모든 것을 관리할 수 있으며, 무료 플랜도 월간 2,000분의 실행 시간을 제공합니다. 이 가이드에서는 첫 번째 GitHub Actions 워크플로우를 생성합니다.

<FreeTierInfo
  service="GitHub Actions"
  limit="월간 2,000분 무료"
  period="monthly"
  status="generous"
/>

## 시작하기 전에

<PrerequisiteCheck items={[
  { text: "GitHub 계정과 리포지토리", required: true },
  { text: "기본적인 YAML 문법 이해", required: false },
  { text: "Node.js 또는 Python 프로젝트 (선택사항)", required: false }
]} />

<Callout type="info">
⚡ **GitHub Actions의 장점**

- **통합**: GitHub 내부에 완전히 통합됨
- **무료**: 월간 2,000분 무료 (프라이빗 리포도 지원)
- **유연함**: 모든 언어와 프레임워크 지원
- **빠름**: 클라우드 러너로 빠른 실행
- **재사용**: Action 마켓플레이스에서 기성품 사용
</Callout>

---

<Step number={1} title="GitHub 리포지토리 준비">

GitHub Actions를 설정할 리포지토리를 준비합니다.

1. [GitHub](https://github.com)에 로그인
2. 사용할 리포지토리로 이동
3. 리포지토리 구조 확인:
   - 소스 코드 (src/, app/ 등)
   - 패키지 관리자 파일 (package.json, requirements.txt 등)
4. 리포지토리에 `.github/workflows` 디렉토리가 없으면 생성할 준비

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/github/github-actions-workflow-setup-step1-ko.png"
  alt="GitHub 리포지토리 준비"
  caption="GitHub 리포지토리 준비 상태를 확인합니다"
/>

<Callout type="tip">
💡 **팁**: 이미 리포지토리가 있다면 그것을 사용하세요. 없다면 새 리포지토리를 생성하거나 테스트용 리포지토리를 만드는 것이 좋습니다.
</Callout>

</Step>

---

<Step number={2} title="워크플로우 파일 생성">

GitHub Actions 워크플로우를 정의하는 YAML 파일을 생성합니다.

1. GitHub 리포지토리 페이지에서 **"Actions"** 탭 클릭
2. **"New workflow"** 버튼 클릭
3. **"set up a workflow yourself"** 클릭
4. 파일 이름을 `ci.yml` 또는 원하는 이름으로 설정
5. 워크플로우 템플릿이 열림

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/github/github-actions-workflow-setup-step2-ko.png"
  alt="워크플로우 파일 생성 화면"
  caption="GitHub Actions 워크플로우 에디터에서 새 워크플로우를 생성합니다"
/>

<DevTip>
처음에는 기본 템플릿을 수정하여 시작하는 것이 좋습니다. 완전히 새로 작성하면 문법이 복잡할 수 있습니다.
</DevTip>

</Step>

---

<Step number={3} title="기본 워크플로우 YAML 작성">

Node.js 프로젝트용 기본 워크플로우를 작성합니다.

<CopyBlock
  code="name: CI Workflow

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: Install dependencies
      run: npm install

    - name: Run linter
      run: npm run lint

    - name: Run tests
      run: npm test

    - name: Build project
      run: npm run build"
  language="yaml"
/>

워크플로우 구조:
- **name**: 워크플로우 이름
- **on**: 트리거 조건 (push, pull_request 등)
- **jobs**: 실행할 작업 목록
- **runs-on**: 실행 환경 (ubuntu-latest, windows-latest 등)
- **steps**: 각 단계의 작업 (checkout, 설정, 테스트 등)

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/github/github-actions-workflow-setup-step3-ko.png"
  alt="YAML 워크플로우 작성 화면"
  caption="워크플로우 YAML 파일을 에디터에 작성합니다"
/>

<Callout type="warning">
⚠️ **YAML 문법 주의사항**

- **들여쓰기**: 스페이스 2개 또는 4개 (탭 금지)
- **콜론**: 키와 값 사이에 공백 필요 (key: value)
- **배열**: "-" 로 시작하는 줄 (- item)
- **따옴표**: 특수문자 포함 시 문자열을 따옴표로 감싸기
</Callout>

</Step>

---

<Step number={4} title="워크플로우 커밋 및 실행">

작성한 워크플로우를 저장하고 실행해봅니다.

1. 에디터에서 **"Commit changes"** 클릭
2. **Commit message** 입력:
   - 예: "Add GitHub Actions CI workflow"
3. **"Commit changes"** 클릭으로 리포지토리에 커밋
4. 자동으로 워크플로우가 실행됨
5. **"Actions"** 탭에서 실행 상태 확인:
   - 노란 점: 실행 중
   - 녹색 체크: 성공
   - 빨간 X: 실패

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/github/github-actions-workflow-setup-step4-ko.png"
  alt="워크플로우 실행 상태 확인"
  caption="Actions 탭에서 워크플로우 실행 상태를 모니터링합니다"
/>

<Callout type="info">
ℹ️ **워크플로우 트리거**

기본 설정에서는:
- **main 또는 develop 브랜치로의 푸시** 시 자동 실행
- **Pull Request** 생성 시 자동 실행
- 다른 이벤트 (release, schedule 등)도 설정 가능
</Callout>

</Step>

---

<Step number={5} title="워크플로우 모니터링 및 수정">

워크플로우 실행 결과를 확인하고 필요시 수정합니다.

1. 실행된 워크플로우 클릭
2. **로그 확인**:
   - 각 단계별 로그 상세 조회
   - 실패 이유 파악
3. 실패 시 수정:
   - 로컬에서 테스트
   - 워크플로우 YAML 수정
   - 다시 커밋하여 재실행
4. **Status badge 추가** (선택사항):
   - README.md에 워크플로우 상태 배지 추가

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/github/github-actions-workflow-setup-step5-ko.png"
  alt="워크플로우 로그 확인"
  caption="워크플로우 실행 로그를 확인하고 문제를 해결합니다"
/>

<CopyBlock
  code="# README.md에 status badge 추가
![CI](https://github.com/username/repo/actions/workflows/ci.yml/badge.svg)

# 또는 특정 브랜치만 표시
![CI](https://github.com/username/repo/actions/workflows/ci.yml/badge.svg?branch=main)"
  language="markdown"
/>

<Checkpoint
  title="GitHub Actions 워크플로우 완료 확인"
  items={[
    "워크플로우 파일이 .github/workflows/ 디렉토리에 있나요?",
    "워크플로우가 정상 실행되었나요?",
    "테스트와 빌드 단계가 성공했나요?",
    "Actions 탭에서 실행 히스토리를 볼 수 있나요?"
  ]}
/>

<Callout type="success">
✅ **완료!** GitHub Actions 워크플로우가 설정되었습니다. 이제 코드 푸시 시 자동으로 테스트와 빌드가 실행됩니다. 다음 가이드에서 워크플로우를 확장하여 배포 단계를 추가하세요.
</Callout>

</Step>

---

## 다음 단계

GitHub Actions를 더 활용하세요:

- **[GitHub Actions 배포 설정](/guides/github-actions-deploy-setup)**: 자동 배포 추가
- **[Azure App Service 설정](/guides/azure-app-service-setup)**: 클라우드 배포

---

## 문제 해결

<DevTip>
**"워크플로우 실패 - npm ERR!"**

다음을 확인하세요:
1. package.json이 리포지토리 루트에 있는지 확인
2. package.json의 scripts 섹션에 필요한 명령이 있는지 확인
3. 의존성 버전이 호환되는지 확인
4. Node.js 버전을 명시적으로 설정
5. 로컬에서 `npm install && npm test`가 실행되는지 확인
</DevTip>

<Callout type="warning">
⚠️ **사용 시간 주의사항**

- **월간 2,000분 한계**: 초과 시 워크플로우 실행 불가
- **초과 시간 계산**: 실제 실행 시간만 계산 (대기 시간 제외)
- **프라이빗 리포**: 월간 3,000분 제공
- **자체 호스팅 러너**: 시간 제한 없음
- **비용 초과 방지**: schedule 트리거 횟수 제한
</Callout>

---

## 일반적인 워크플로우 패턴

**Python 프로젝트:**
```yaml
- uses: actions/setup-python@v4
  with:
    python-version: '3.10'
- run: pip install -r requirements.txt
- run: python -m pytest
```

**Docker 빌드:**
```yaml
- uses: docker/build-push-action@v4
  with:
    context: .
    push: false
    tags: myapp:latest
```

**환경 변수:**
```yaml
env:
  NODE_ENV: test
  API_KEY: \${{ secrets.API_KEY }}
```
