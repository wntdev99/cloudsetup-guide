# Azure SQL Database 설정 - 관계형 데이터베이스

Azure SQL Database는 **완전히 관리되는 관계형 데이터베이스 서비스**로, Microsoft SQL Server 기반입니다. 자동 백업, 보안 업데이트, 고가용성 등 엔터프라이즈급 기능을 제공하면서도 설정과 관리가 간단합니다. 이 가이드에서는 Azure SQL Database를 생성하고 기본 설정을 구성합니다.

<FreeTierInfo
  service="Azure SQL Database"
  limit="250GB 저장소, 12개월"
  period="monthly"
  status="available"
/>

## 시작하기 전에

<PrerequisiteCheck items={[
  { text: "Azure 계정 생성 완료", required: true },
  { text: "Azure Portal 접속 가능", required: true },
  { text: "SQL 기본 이해", required: false }
]} />

<Callout type="info">
🗄️ **Azure SQL Database의 특징**

- **완전 관리형**: 패치, 백업, 보안 자동 처리
- **고가용성**: 99.99% SLA 보장
- **보안**: 암호화, 방화벽, 감사 기능
- **확장성**: 필요에 따라 성능 조정
- **비용 효율적**: 소비한 리소스만 결제
</Callout>

---

<Step number={1} title="SQL Database 서버 생성">

Azure Portal에서 SQL Database 서버를 생성합니다.

1. [Azure Portal](https://portal.azure.com)에 로그인
2. **"리소스 만들기"** 클릭
3. **"SQL Database"** 검색
4. **"SQL Database"** 선택
5. **"만들기"** 클릭

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/azure/azure-sql-database-setup-step1-ko.png"
  alt="SQL Database 생성 시작"
  caption="Azure Portal에서 SQL Database 생성을 시작합니다"
/>

<Callout type="tip">
💡 **팁**: "빠른 만들기" 옵션을 선택하면 기본 설정으로 빠르게 만들 수 있습니다.
</Callout>

</Step>

---

<Step number={2} title="데이터베이스 기본 설정">

데이터베이스의 기본 정보를 설정합니다.

1. **구독** 선택 (기본값 유지)
2. **리소스 그룹** 생성 또는 선택
3. **데이터베이스 이름** 입력
   - 예: "myappdb"
   - 소문자, 숫자, 하이픈만 사용
4. **서버** 생성:
   - **"새로 만들기"** 클릭
   - **서버 이름** 입력 (전역적으로 고유해야 함)
     - 예: "mysqlserver20260208"
   - **위치** 선택 (권장: East Asia)
   - **서버 관리자 로그인** 입력 (예: sqladmin)
   - **암호** 설정 (복잡도 요구사항 충족)

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/azure/azure-sql-database-setup-step2-ko.png"
  alt="데이터베이스 기본 설정 화면"
  caption="데이터베이스와 서버 정보를 설정합니다"
/>

<DevTip>
서버 이름은 전 세계적으로 고유해야 하므로, 현재 날짜나 프로젝트 이름을 포함하는 것이 좋습니다.
</DevTip>

</Step>

---

<Step number={3} title="컴퓨팅 및 스토리지 설정">

데이터베이스의 성능과 스토리지를 설정합니다.

1. **컴퓨팅 + 스토리지** 선택:
   - **계산 계층**: "서버리스" 또는 "프로비저닝됨"
   - 무료 사용자: "서버리스" (자동 일시 중지, 저렴한 비용)
   - **성능 수준**: 기본 (B)
   - **vCore**: 2 vCores (무료 범위 내)
   - **저장소**: 50GB (무료 범위 내)

2. **백업 저장소**:
   - **중복성**: 로컬 중복 저장소 (LRS)

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/azure/azure-sql-database-setup-step3-ko.png"
  alt="컴퓨팅 및 스토리지 설정 화면"
  caption="데이터베이스 성능과 스토리지를 구성합니다"
/>

<CopyBlock
  code="// Azure SQL Database 가격 계산
// 서버리스 계산 계층:
// - 자동 일시 중지 (비용 절감)
// - vCore당 시간당 비용
// - 저장소: GB당 월간 비용
// - 백업 저장소: 데이터베이스 크기의 100% 무료

// 프로비저닝됨 계산 계층:
// - 항상 실행 (더 높은 성능)
// - 고정 월간 비용
// - 백업은 별도 요금"
  language="text"
/>

</Step>

---

<Step number={4} title="방화벽 규칙 설정">

데이터베이스 접근 권한을 관리하기 위한 방화벽 규칙을 설정합니다.

1. **"네트워킹"** 탭으로 이동
2. **"공개 끝점"** 선택 (현재 IP로 접근)
3. **방화벽 규칙** 추가:
   - **"현재 클라이언트 IP 주소 추가"** 클릭
   - 자신의 IP가 자동으로 추가됨
4. **"모든 Azure 서비스 및 리소스가 이 서버에 액세스하도록 허용"** 토글
   - Azure VM이나 App Service에서 접근 시 필요
5. **"저장"** 클릭

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/azure/azure-sql-database-setup-step4-ko.png"
  alt="방화벽 규칙 설정 화면"
  caption="데이터베이스 접근을 제어하는 방화벽 규칙을 설정합니다"
/>

<Callout type="warning">
⚠️ **보안 주의사항**

- 필요한 IP만 허용하세요
- 0.0.0.0 - 255.255.255.255 규칙은 모든 접근 허용 (위험)
- 프로덕션 환경에서는 VNet 통합 권장
- 정기적으로 규칙 검토 및 불필요한 규칙 제거
</Callout>

</Step>

---

<Step number={5} title="데이터베이스 연결 및 쿼리">

생성된 데이터베이스에 연결하고 기본 쿼리를 실행합니다.

1. **SQL Database 페이지**로 이동
2. **"연결 문자열"** 확인:
   - **ADO.NET**: .NET 애플리케이션
   - **JDBC**: Java 애플리케이션
   - **ODBC**: Python/Node.js 애플리케이션
   - **PHP**: PHP 애플리케이션

3. **"쿼리 편집기"** 사용:
   - Azure Portal의 "쿼리 편집기" 클릭
   - 서버 관리자 계정과 암호로 로그인
   - SQL 쿼리 실행

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/azure/azure-sql-database-setup-step5-ko.png"
  alt="데이터베이스 연결 및 쿼리 화면"
  caption="연결 문자열을 확인하고 쿼리 편집기에서 쿼리를 실행합니다"
/>

<CopyBlock
  code="// Azure SQL Database 기본 쿼리 예시
-- 테이블 생성
CREATE TABLE Users (
  UserID INT PRIMARY KEY IDENTITY(1,1),
  Username NVARCHAR(100) NOT NULL,
  Email NVARCHAR(100) NOT NULL,
  CreatedDate DATETIME DEFAULT GETDATE()
);

-- 데이터 삽입
INSERT INTO Users (Username, Email)
VALUES ('john_doe', 'john@example.com');

-- 데이터 조회
SELECT * FROM Users;"
  language="sql"
/>

<Checkpoint
  title="SQL Database 설정 완료 확인"
  items={[
    "SQL Database가 생성되었나요?",
    "서버 관리자 계정이 설정되었나요?",
    "방화벽 규칙이 구성되었나요?",
    "쿼리 편집기에서 쿼리를 실행할 수 있나요?"
  ]}
/>

<Callout type="success">
✅ **완료!** Azure SQL Database가 설정되었습니다. 이제 애플리케이션에서 이 데이터베이스에 연결하여 데이터를 저장하고 조회할 수 있습니다. 다음 가이드에서 Azure App Service와 함께 웹앱을 배포하세요.
</Callout>

</Step>

---

## 다음 단계

관련 Azure 서비스를 설정하세요:

- **[Azure App Service 설정](/guides/azure-app-service-setup)**: 웹앱 배포
- **[Azure Virtual Machine 설정](/guides/azure-vm-setup)**: 가상 머신 구성

---

## 문제 해결

<DevTip>
**"데이터베이스 연결 실패"**

다음을 확인하세요:
1. 방화벽 규칙에서 현재 IP가 허용되는지 확인
2. 서버 이름과 데이터베이스 이름이 올바른지 확인
3. 관리자 사용자 이름과 암호가 정확한지 확인
4. 연결 문자열 형식이 올바른지 확인
5. Azure Portal의 "쿼리 편집기"에서 테스트
</DevTip>

<Callout type="warning">
⚠️ **성능 및 비용 최적화**

- **서버리스 계산**: 자동 일시 중지로 비용 절감
- **백업 정책**: 자동 백업은 7일 보관 (기본)
- **저장소 최적화**: 불필요한 데이터 정리
- **인덱싱**: 쿼리 성능 개선
- **스케일링**: 트래픽에 따라 성능 조정
</Callout>

---

## SQL Database vs 다른 데이터베이스 서비스

| 항목 | SQL Database | Cosmos DB | PostgreSQL |
|------|-------------|-----------|-----------|
| 유형 | 관계형 | NoSQL | 관계형 |
| 스키마 | 고정 | 유연함 | 고정 |
| 쿼리 | SQL | Document API | SQL |
| 추천 | 전통 애플리케이션 | 스케일링 앱 | 오픈소스 선호 |
| 성능 | 높음 | 초고속 | 중간 |
