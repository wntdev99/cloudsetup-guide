# Firebase Cloud Firestore 설정 - NoSQL 데이터베이스

Cloud Firestore는 Firebase의 **클라우드 호스팅 NoSQL 데이터베이스**입니다. 문서와 컬렉션으로 데이터를 구성하며, 실시간 동기화와 강력한 쿼리 기능을 제공합니다. 이 가이드에서는 Firestore를 설정하고 첫 데이터를 저장하는 방법을 배웁니다.

<FreeTierInfo
  service="Cloud Firestore"
  limit="50,000 읽기, 20,000 쓰기/일"
  period="daily"
  status="available"
/>

## 시작하기 전에

<PrerequisiteCheck items={[
  { text: "Firebase 프로젝트 생성 완료", required: true },
  { text: "Firebase 콘솔 접속 가능", required: true },
  { text: "기본적인 데이터 구조 이해", required: false }
]} />

<Callout type="info">
📚 **Firestore 데이터 구조**

Firestore는 다음과 같은 계층 구조를 사용합니다:
- **컬렉션**: 문서의 모음 (예: "users", "products")
- **문서**: 데이터의 최소 단위 (예: user1, product1)
- **필드**: 문서 내의 속성 (예: name, age, email)
</Callout>

---

<Step number={1} title="Firestore Database 생성">

Firebase 콘솔에서 Firestore를 활성화합니다.

1. Firebase 콘솔 좌측 메뉴에서 **"Firestore Database"** 선택
2. **"데이터베이스 만들기"** 또는 **"시작"** 버튼 클릭
3. **시작 모드** 선택:
   - **프로덕션 모드**: 보안 규칙 활성화 (권장)
   - **테스트 모드**: 모든 요청 허용 (테스트 전용)
4. 처음이면 **테스트 모드**를 선택하고 나중에 변경할 수 있습니다
5. **지역** 선택 (한국: `asia-northeast1` - 도쿄 권장)
6. **데이터베이스 만들기** 클릭

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/firebase/firebase-firestore-setup-step1-ko.png"
  alt="Firestore 데이터베이스 생성 화면"
  caption="시작 모드와 지역을 선택하고 데이터베이스를 생성합니다"
/>

<Callout type="warning">
⚠️ **보안 모드 주의사항**

테스트 모드는 30일 후 자동으로 비활성화됩니다. 프로덕션 환경에서는 반드시 보안 규칙을 설정하세요:
```
match /databases/{database}/documents {
  match /{document=**} {
    allow read, write: if request.auth != null;
  }
}
```
</Callout>

<DevTip>
아시아 태평양 지역을 선택하면 한국 사용자에게 더 빠른 응답 시간을 제공합니다. 지역은 생성 후 변경할 수 없으므로 신중하게 선택하세요.
</DevTip>

</Step>

---

<Step number={2} title="첫 컬렉션 생성">

이제 데이터를 저장할 컬렉션을 만듭니다.

1. **"컬렉션 시작"** 또는 **"+ 컬렉션 추가"** 버튼 클릭
2. **컬렉션 ID** 입력 (예: "users", "posts", "products")
   - 소문자, 하이픈 사용 권장
   - 띄어쓰기는 사용할 수 없음
3. **"다음"** 클릭
4. 첫 **문서 ID** 입력 (자동 생성 또는 사용자 지정)
   - 자동 생성하면 고유 ID가 자동으로 할당됨
5. **"계속"** 클릭

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/firebase/firebase-firestore-setup-step2-ko.png"
  alt="컬렉션 생성 화면"
  caption="컬렉션 ID를 입력하고 첫 문서를 추가합니다"
/>

<Callout type="info">
ℹ️ **컬렉션 명명 규칙**

관례적으로 컬렉션 이름은:
- 소문자 사용
- 복수형 사용 (예: "user" 대신 "users")
- 하이픈으로 단어 구분 (예: "user-profiles")
</Callout>

</Step>

---

<Step number={3} title="문서에 데이터 추가">

문서에 필드(속성)와 값을 추가합니다.

1. 문서 ID 선택 후 **"필드 추가"** 클릭
2. **필드 이름** 입력 (예: "name", "email", "age")
3. **필드 유형** 선택:
   - **문자열 (string)**: 텍스트
   - **숫자 (number)**: 정수나 실수
   - **부울 (boolean)**: true/false
   - **타임스탐프 (timestamp)**: 날짜/시간
   - **배열 (array)**: 리스트
   - **맵 (map)**: 중첩된 객체
   - **지리점 (geo point)**: 위도/경도
4. **필드 값** 입력
5. **저장** 클릭

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/firebase/firebase-firestore-setup-step3-ko.png"
  alt="필드 추가 화면"
  caption="필드 이름, 유형, 값을 지정하여 데이터를 저장합니다"
/>

<CopyBlock
  code="// Firestore 문서 구조 예시
{
  name: 'John Doe',
  email: 'john@example.com',
  age: 30,
  isActive: true,
  joinDate: 2026-02-08,
  tags: ['admin', 'user'],
  address: {
    city: 'Seoul',
    country: 'Korea'
  }
}"
  language="javascript"
/>

</Step>

---

<Step number={4} title="추가 문서 생성">

같은 컬렉션에 더 많은 문서를 추가합니다.

1. 컬렉션 페이지에서 **"문서 추가"** 또는 **"+"** 버튼 클릭
2. 새 문서 ID 입력 (자동 생성 또는 사용자 지정)
3. 필드와 값 추가
4. **저장** 클릭

여러 문서를 추가하여 컬렉션을 구성할 수 있습니다.

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/firebase/firebase-firestore-setup-step4-ko.png"
  alt="추가 문서 생성 화면"
  caption="같은 컬렉션에 여러 문서를 추가할 수 있습니다"
/>

<DevTip>
대량의 데이터를 가져오거나 내보내려면 Firebase Console의 "데이터 가져오기" 기능이나 Firebase CLI를 사용할 수 있습니다. CSV나 JSON 파일로 한 번에 여러 문서를 업로드 가능합니다.
</DevTip>

</Step>

---

<Step number={5} title="쿼리 및 인덱스 확인">

Firestore의 쿼리 기능을 이해합니다.

1. **인덱스** 탭에서 자동으로 생성된 인덱스 확인
2. 복합 쿼리를 수행하려면 인덱스가 필요할 수 있음
3. Firestore가 필요한 인덱스를 자동으로 제안함

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/firebase/firebase-firestore-setup-step5-ko.png"
  alt="인덱스 및 쿼리 화면"
  caption="자동으로 생성된 인덱스를 확인하고 복합 쿼리를 최적화합니다"
/>

<Checkpoint
  title="Firestore 설정 완료 확인"
  items={[
    "Firestore 데이터베이스가 생성되었나요?",
    "첫 컬렉션과 문서가 보이나요?",
    "필드들이 올바르게 저장되었나요?"
  ]}
/>

<Callout type="success">
✅ **완료!** Cloud Firestore 데이터베이스가 설정되었습니다. 이제 웹 앱에서 이 데이터베이스에 접근할 수 있습니다. 다음 가이드에서 Firebase Authentication을 설정하여 사용자 인증을 추가하세요.
</Callout>

</Step>

---

## 다음 단계

관련 가이드를 계속 진행하세요:

- **[Firebase Authentication 설정](/guides/firebase-auth-setup)**: 사용자 인증 추가
- **[Firebase Storage 설정](/guides/firebase-storage-setup)**: 파일 저장소 설정

---

## 문제 해결

<Callout type="warning">
⚠️ **"권한 없음" 오류가 나타납니다**

데이터를 읽거나 쓸 수 없는 경우:
1. Firestore 보안 규칙을 확인하세요
2. 테스트 모드가 활성화되어 있는지 확인
3. 필요한 인덱스가 생성되었는지 확인
4. Firebase 인증을 설정했다면 규칙을 업데이트하세요
</Callout>

<DevTip>
**Firestore와 Realtime Database의 차이**

| 항목 | Firestore | Realtime Database |
|------|-----------|-------------------|
| 구조 | 컬렉션/문서 | JSON 트리 |
| 쿼리 | 강력함 | 제한적 |
| 인덱싱 | 자동 | 수동 |
| 오프라인 | 지원 | 제한적 |
| 추천 | 중규모 이상 | 소규모 앱 |
</DevTip>

---

## Firestore 활용 팁

**데이터 구조 설계 팁:**

1. **컬렉션 구조**: users, posts, comments 등 명확하게 분리
2. **문서 크기**: 각 문서를 1MB 이하로 유지 (성능 최적화)
3. **부분 컬렉션**: users/[userId]/orders 같은 중첩 구조 활용
4. **배열 사용**: 1000개 이상의 항목은 별도 컬렉션으로 분리
5. **타임스탐프**: 생성/수정 시간을 별도 필드로 저장
