# Twilio SMS 통합 - 애플리케이션에서 SMS 보내기

Twilio 계정이 준비되었으니 이제 **애플리케이션에서 실제로 SMS를 보낼** 차례입니다. Node.js, Python 등에서 회원 인증, OTP 검증, 알림 등을 구현할 수 있습니다. 25분 안에 통합을 완료할 수 있습니다.

<FreeTierInfo
  service="Twilio SMS API"
  limit="무료 평가판 $15 크레딧"
  period="trial"
  status="generous"
/>

## 시작하기 전에

<PrerequisiteCheck items={[
  { text: "Twilio 계정 및 API 키", required: true },
  { text: "Twilio 전화번호", required: true },
  { text: "Node.js 또는 Python", required: true }
]} />

<Callout type="info">
📱 **이 가이드의 목표**: Twilio API를 사용하여 애플리케이션에서 SMS를 보냅니다.
</Callout>

---

<Step number={1} title="Node.js에서 Twilio SMS 설정">

**NPM 패키지 설치:**

<CopyBlock
  code="npm install twilio"
  language="bash"
/>

**기본 SMS 보내기:**

<CopyBlock
  code="const twilio = require('twilio');

const accountSid = process.env.TWILIO_ACCOUNT_SID;
const authToken = process.env.TWILIO_AUTH_TOKEN;
const client = twilio(accountSid, authToken);

client.messages
  .create({
    body: '안녕하세요! Twilio에서 보낸 메시지입니다.',
    from: process.env.TWILIO_PHONE_NUMBER,
    to: '+1234567890'
  })
  .then(message => console.log('SMS 전송:', message.sid))
  .catch(error => console.error(error));"
  language="javascript"
/>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/twilio/step1-nodejs-sms-ko.png"
  alt="Node.js Twilio SMS"
  caption="Node.js에서 Twilio SMS 보내기"
  priority={true}
/>

</Step>

---

<Step number={2} title="Python에서 Twilio SMS 설정">

**pip 패키지 설치:**

<CopyBlock
  code="pip install twilio"
  language="bash"
/>

**기본 SMS 보내기:**

<CopyBlock
  code="from twilio.rest import Client
import os

account_sid = os.getenv('TWILIO_ACCOUNT_SID')
auth_token = os.getenv('TWILIO_AUTH_TOKEN')
client = Client(account_sid, auth_token)

message = client.messages.create(
    body='안녕하세요! Twilio에서 보낸 메시지입니다.',
    from_=os.getenv('TWILIO_PHONE_NUMBER'),
    to='+1234567890'
)

print('SMS 전송:', message.sid)"
  language="python"
/>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/twilio/step2-python-sms-ko.png"
  alt="Python Twilio SMS"
  caption="Python에서 Twilio SMS 보내기"
/>

</Step>

---

<Step number={3} title="실제 사용 사례: OTP 인증">

사용자에게 OTP를 발송하는 예제입니다.

**Node.js Express 예제:**

<CopyBlock
  code="const express = require('express');
const twilio = require('twilio');
const app = express();

const client = twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN);

app.post('/send-otp', (req, res) => {
  const { phone } = req.body;
  const otp = Math.floor(100000 + Math.random() * 900000);

  client.messages.create({
    body: 'Your OTP is: ' + otp,
    from: process.env.TWILIO_PHONE_NUMBER,
    to: phone
  })
  .then(message => {
    res.json({ success: true, message_id: message.sid });
  })
  .catch(error => {
    res.status(500).json({ error: error.message });
  });
});"
  language="javascript"
/>

**Python Flask 예제:**

<CopyBlock
  code="from flask import Flask, request, jsonify
from twilio.rest import Client
import os
import random

app = Flask(__name__)
client = Client(os.getenv('TWILIO_ACCOUNT_SID'), os.getenv('TWILIO_AUTH_TOKEN'))

@app.route('/send-otp', methods=['POST'])
def send_otp():
  data = request.json
  phone = data['phone']
  otp = random.randint(100000, 999999)

  message = client.messages.create(
    body='Your OTP is: ' + str(otp),
    from_=os.getenv('TWILIO_PHONE_NUMBER'),
    to=phone
  )

  return jsonify({ 'success': True, 'message_id': message.sid })"
  language="python"
/>

<Screenshot
  src="https://res.cloudinary.com/demo/image/upload/v1/twilio/step3-otp-integration-ko.png"
  alt="OTP 통합"
  caption="사용자에게 OTP 발송"
/>

</Step>

---

<Step number={4} title="SMS 콜백 및 수신 처리">

사용자의 응답을 받으려면 Webhook을 설정합니다.

**수신 Webhook 설정:**

1. Twilio 대시보직에서 **Messaging > Settings > Webhooks**로 이동합니다.
2. **Incoming Message Webhook**을 설정합니다 (예: https://yoursite.com/sms).
3. HTTP POST를 선택합니다.

**Node.js Webhook 핸들러:**

<CopyBlock
  code="app.post('/sms', express.urlencoded({ extended: false }), (req, res) => {
  const fromNumber = req.body.From;
  const messageBody = req.body.Body;

  console.log('수신:', fromNumber, messageBody);

  const twiml = new twilio.twiml.MessagingResponse();
  twiml.message('메시지를 받았습니다: ' + messageBody);

  res.type('text/xml').send(twiml.toString());
});"
  language="javascript"
/>

<Checkpoint
  title="설정 확인"
  items={[
    "Twilio 패키지를 설치했나요?",
    "환경 변수를 설정했나요?",
    "SMS를 성공적으로 보냈나요?",
    "SMS 기록을 대시보드에서 확인했나요?",
    "Webhook을 설정했나요 (선택사항)?"
  ]}
/>

<Callout type="success">
✅ **완료!** Twilio SMS 통합이 완료되었습니다. 이제 애플리케이션에서 안정적으로 SMS를 보낼 수 있습니다.
</Callout>

</Step>

---

## 다음 단계

완료했으니:

1. **[Twilio 음성 API](https://www.twilio.com/docs/voice)** - 음성 통화 추가
2. **[SMS 템플릿](https://www.twilio.com/docs/messaging)** - 보다 복잡한 메시지
3. **[Twilio 분석](https://www.twilio.com/docs/monitoring)** - 메시지 추적

---

## 자주 묻는 질문

<Callout type="info">
**Q. SMS가 전송되지 않습니다**

A. 다음을 확인하세요:
- 수신자 번호가 검증되었나요? (평가판)
- 크레딧이 남아있나요?
- 계정 SID와 Auth Token이 정확한가?
</Callout>

<Callout type="info">
**Q. 한 번에 많은 SMS를 보낼 수 있나요?**

A. 예, 하지만 평가판에서는 20개 검증된 번호로 제한됩니다. 유료 계정으로 업그레이드하면 무제한입니다.
</Callout>

---

**축하합니다!** Twilio SMS 통합이 완료되었습니다! 🚀
